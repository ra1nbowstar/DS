附件编号：[附件一]
文件名称：《[软件名称] V[版本号] 功能清单》
合同关联：本清单为《[合同全称]》（合同编号：[编号]）不可分割部分，与主合同具有同等法律效力。

一、基础信息

- **软件名称**: :
- **版本号**: :
- **交付环境**: :
- **清单版本**: :
- **生效日期**: :

二、功能模块清单（总纲）

- **子功能细化表**:

    | 功能模块 | 子功能 | 功能描述 | 验收标准 | 优先级 | 备注 |
    |---|---|---|---|---:|---|
    | 用户管理 | 账号注册 | 支持手机号+验证码注册，必填字段：手机号、密码、姓名（推荐码可选） | 手机号格式校验；验证码有效期5分钟；手机号唯一；创建成功返回 user_id；接口响应≤500ms | 高 | 需对接短信API |
    | 用户管理 | 登录认证 | 账号密码登录、支持微信小程序一键登录，返回 JWT token（有效期1天） | 密码校验通过；失败计数锁定策略生效（示例：连续5次失败锁定30分钟）；登录成功返回 token 与用户信息；接口响应≤500ms | 高 | 支持 refresh token |
    | 用户管理 | 权限控制 | 按角色（管理员/普通用户）分配菜单与操作权限，支持后台管理权限配置 | 权限配置即时生效；无越权访问；不同角色访问受限接口返回 403；权限变更生效时间≤1分钟 | 中 | 权限表可配置扩展 |
    | 用户管理 | 用户信息维护 | 支持修改昵称、手机号、头像、密码、个人资料 | 修改后返回最新用户信息；字段校验生效；密码修改需原密码或验证码验证；接口响应≤500ms | 中 | 头像通过专门接口上传 |
    | 用户管理 | 地址管理 | 收货地址增/删/改/查、设为默认、退货地址管理 | 默认地址唯一；地址录入带省市区校验；接口返回地址列表且分页；设置默认时原默认取消 | 中 | 地址与用户系统统一管理（见 services/address_service.py） |
    | 用户管理 | 头像上传 | 支持图片上传、裁剪、压缩，返回可访问 URL | 支持 jpeg/png；文件大小≤2MB；图片处理成功并返回 URL；访问权限正确 | 低 | 使用 Pillow 处理，存储到 `pic_data/` |
    | 用户管理 | 密码找回 | 短信验证码找回并重设密码，含强度校验 | 验证码有效且只能使用一次；新密码符合强度规则；操作有记录和时戳 | 高 | 需短信 API 集成 |
    | 用户管理 | 绑定推荐人 | 用户可通过推荐码或推荐人手机号绑定推荐人关系 | 推荐关系唯一且不可重复绑定；绑定后在用户信息中可见上级信息 | 低 | 绑定需防止循环引用 |
    | 用户管理 | 查询直推/团队 | 支持查询直推用户列表与团队列表（可递归至 N 层，默认6层） | 支持分页与筛选；返回层级与关系链；响应合理时间（示例≤1s） | 低 | 支持导出报表 |
    | 用户管理 | 用户列表与导出 | 管理端分页筛选用户并支持导出Excel | 筛选条件正确、导出数据完整性校验通过；导出文件格式正确，导出时间≤30s（小于10k条） | 中 | 导出需相应权限 |
    | 用户管理 | 冻结/注销 | 管理端冻结用户/用户自助注销（逻辑删除） | 冻结后不可登录、不可下单；注销为逻辑删除并保留必要数据（按保留期策略） | 高 | 注销需二次确认与备份 |
    | 用户管理 | 会员升级/设置等级 | 支持用户升级会员、后台调整等级 | 升级后权限/价格生效；历史变更记录保存；升级接口幂等 | 中 | 可能涉及支付或后台审批 |

  - **验收占位**: 每项功能在最终清单中需填入“功能描述 / 接口示例 / 验收标准（步骤） / 优先级 / 备注（对接/特殊权限/数据迁移）”。

- **模块**: 订单系统
  - **子功能占位**: 购物车、订单创建、订单支付、订单状态流转（待支付/待发货/待收货/完成）、退货退款、商家发货、订单查询、报表导出
  - **验收占位**: 填写接口响应、业务规则、流水一致性、数据完整性

- **模块**: 商品管理
  - **子功能占位**: 商品增删改查、图片上传与处理、商品搜索、轮播图管理、商品分类、库存管理
  - **验收占位**: 图片质量、上传限制、搜索准确率、分页与筛选

- **模块**: 财务系统
  - **子功能占位**: 支付对接、分账规则、提现与审核、资金池管理、对账与流水、周补贴分发、报表统计
  - **验收占位**: 账务平衡、分账规则正确性、提现时限、退款资金回退验证

- **模块**: 系统/平台管理
  - **子功能占位**: 系统配置、轮播语句管理、日志与审计、定时任务、管理员权限管理
  - **验收占位**: 配置生效性、审计日志完整性、任务触发正确性

- **模块**: 接口与集成
  - **子功能占位**: 第三方登录（微信）、短信 API 对接、支付网关（微信/支付宝/银联）、邮件/通知
  - **验收占位**: 第三方交互成功率、错误处理与重试策略

说明：每个模块在最终合同清单中应展开为表格形式，列出“功能模块 / 子功能 / 功能描述 / 验收标准 / 优先级 / 备注”。

三、非功能要求（关键指标模板）

- **性能**: 支持并发用户： [占位，例如 1000 并发]；API 响应：平均 ≤ [500]ms，95% 响应 ≤ [1s]；页面首屏加载 ≤ [2]s
- **可用性**: SLA 可用率：99.5%（月）
- **扩展性**: 支持水平扩容，数据库与静态资源分离部署
- **安全**: 敏感数据加密：[AES/RSA]；密码加密：bcrypt；登录失败锁定策略：连续 N 次失败锁定 M 分钟；操作审计：管理员操作留痕
- **兼容性**: 浏览器：Chrome/Edge/Safari 最新两代；移动端：iOS [占位]、Android [占位]
- **可维护性**: 提供接口文档（OpenAPI/Swagger）、部署手册、源码注释覆盖率 ≥ 80%
- **备份与恢复**: 数据库每日备份，备份保留期：30 天，恢复时长目标 ≤ 4 小时

四、验收与变更规则（模板）

- **验收标准**：按清单“验收标准”项逐条测试，单项通过后标注为“已通过”；整体通过率 100% 为合格交付。
- **验收流程**：
  1. 乙方完成开发并提交测试环境；
  2. 甲方在约定时间内（例如 10 个工作日）完成功能验证并提交问题清单；
  3. 乙方在约定修复周期内修复并提交复测；
  4. 双方确认全部条目通过后签署验收单。
- **变更流程**：任何功能增删改均需双方签署《需求变更确认单》，变更同时调整工期与费用。
- **缺陷分级与响应时限**：
  - 紧急（P0）：系统不可用/关键业务中断，响应 ≤ 2 小时，修复或临时解决方案 ≤ 24 小时；
  - 高（P1）：主要功能受影响，响应 ≤ 8 小时，修复或规避措施 ≤ 3 个工作日；
  - 中（P2）：次要功能/界面问题，响应 ≤ 2 个工作日，修复 ≤ 10 个工作日；
  - 低（P3）：建议性改进，双方另行评估排期。

五、交付物与交付标准

- **交付物清单**：源代码（含注释）、部署脚本、依赖清单（pyproject.toml 或 requirements.txt）、数据库初始化脚本、接口文档（OpenAPI）、部署手册、用户手册、测试报告
- **交付标准**：代码能在目标环境按文档部署并启动，接口文档与实际接口一致，关键用例通过测试

六、验收交付时间与里程碑（示例）

- **里程碑1**：需求确认与技术评估 — 日期
- **里程碑2**：开发完成（测试环境） — 日期
- **里程碑3**：甲方测试与问题修复 — 日期
- **里程碑4**：验收与生产部署 — 日期

七、知识产权与源码交付（简要）

- **代码归属**：按主合同约定。若合同约定源码交付，则乙方应提供完整源码与构建说明。
- **第三方组件**：列明所有第三方依赖及许可证，若有商业授权需由甲方另行购买。

八、签署确认

- 甲方（盖章）：__________  代表签字：__________  日期：__________
- 乙方（盖章）：__________  代表签字：__________  日期：__________

